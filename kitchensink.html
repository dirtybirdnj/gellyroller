<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duet Controller API - Kitchen Sink</title>
</head>
<body>
    <h1>Duet Controller API Test Interface</h1>
    <p>Test all API endpoints using the forms below. Results will appear in a new page.</p>
    <hr>

    <h2>Status & Information</h2>
    
    <h3>Health Check</h3>
    <form action="/health" method="GET" target="_blank">
        <button type="submit">Get Health Status</button>
    </form>

    <h3>Get Position</h3>
    <form action="/position" method="GET" target="_blank">
        <button type="submit">Get Current Position</button>
    </form>

    <h3>Get State</h3>
    <form action="/state" method="GET" target="_blank">
        <button type="submit">Get Full State</button>
    </form>

    <h3>Get Status</h3>
    <form action="/status" method="GET" target="_blank">
        <button type="submit">Get Status Summary</button>
    </form>

    <h3>Get Configuration</h3>
    <form action="/config" method="GET" target="_blank">
        <button type="submit">Get Machine Config</button>
    </form>

    <hr>

    <h2>Movement & Control</h2>

    <h3>Home All Axes</h3>
    <form action="/home" method="POST" target="_blank">
        <label>Axes (optional, e.g., "X Y"): <input type="text" name="axes"></label><br>
        <button type="submit">Home</button>
    </form>

    <h3>Go To Location (Fast)</h3>
    <form action="/goto/fast" method="POST" target="_blank">
        <label>X: <input type="number" name="x" step="0.01"></label><br>
        <label>Y: <input type="number" name="y" step="0.01"></label><br>
        <label>Z: <input type="number" name="z" step="0.01"></label><br>
        <button type="submit">Move Fast (G0)</button>
    </form>

    <h3>Go To Location (Slow)</h3>
    <form action="/goto/slow" method="POST" target="_blank">
        <label>X: <input type="number" name="x" step="0.01"></label><br>
        <label>Y: <input type="number" name="y" step="0.01"></label><br>
        <label>Z: <input type="number" name="z" step="0.01"></label><br>
        <label>Feed Rate (F): <input type="number" name="f"></label><br>
        <button type="submit">Move Slow (G1)</button>
    </form>

    <h3>Pause Operation</h3>
    <form action="/pause" method="POST" target="_blank">
        <button type="submit">Pause</button>
    </form>

    <h3>Cancel Operation</h3>
    <form action="/cancel" method="POST" target="_blank">
        <button type="submit">Cancel/Stop</button>
    </form>

    <h3>Emergency Stop</h3>
    <form action="/emergency-stop" method="POST" target="_blank">
        <button type="submit">EMERGENCY STOP</button>
    </form>

    <hr>

    <h2>G-code & Files</h2>

    <h3>List SD Card Files</h3>
    <form action="/sd/files" method="GET" target="_blank">
        <button type="submit">List Files</button>
    </form>

    <h3>Get SD Card Info</h3>
    <form action="/sd/info" method="GET" target="_blank">
        <button type="submit">Get SD Info</button>
    </form>

    <h3>Upload File to SD Card</h3>
    <form action="/sd/upload" method="POST" target="_blank">
        <label>Filename: <input type="text" name="filename" required placeholder="myfile.g"></label><br>
        <label>G-code Content:</label><br>
        <textarea name="content" rows="10" cols="50" required placeholder="G28&#10;G0 X100 Y100&#10;M0"></textarea><br>
        <button type="submit">Upload File</button>
    </form>

    <h3>Execute G-code File</h3>
    <form action="/execute" method="POST" target="_blank">
        <label>Filename: <input type="text" name="filename" required></label><br>
        <button type="submit">Execute File</button>
    </form>

    <h3>Send Raw G-code</h3>
    <form action="/gcode" method="POST" target="_blank">
        <label>G-code Command: <input type="text" name="command" required placeholder="e.g., G28 X Y"></label><br>
        <button type="submit">Send G-code</button>
    </form>

    <hr>

    <h2>GPIO Control</h2>

    <h3>Set GPIO Pin</h3>
    <form action="/gpio/send" method="POST" target="_blank">
        <label>Pin: <input type="number" name="pin" required></label><br>
        <label>Value: <input type="number" name="value" required></label><br>
        <button type="submit">Set GPIO</button>
    </form>

    <h3>Read GPIO Pin</h3>
    <form action="/gpio/read" method="GET" target="_blank">
        <label>Pin: <input type="number" name="pin" required></label><br>
        <button type="submit">Read GPIO</button>
    </form>

    <hr>

    <h2>System Management</h2>

    <h3>Get System Uptime</h3>
    <form action="/system/uptime" method="GET" target="_blank">
        <button type="submit">Get Uptime</button>
    </form>

    <h3>Schedule System Shutdown</h3>
    <form action="/system/shutdown" method="POST" target="_blank">
        <label>Minutes (default 5): <input type="number" name="minutes" min="0"></label><br>
        <button type="submit">Schedule Shutdown</button>
    </form>

    <h3>Cancel Scheduled Shutdown</h3>
    <form action="/system/shutdown/cancel" method="POST" target="_blank">
        <button type="submit">Cancel Shutdown</button>
    </form>

    <h3>Restart System</h3>
    <form action="/system/restart" method="POST" target="_blank">
        <button type="submit">Restart Raspberry Pi</button>
    </form>

    <hr>

    <footer>
        <p><small>Duet Controller API Kitchen Sink - Test all endpoints</small></p>
    </footer>
</body>
</html>